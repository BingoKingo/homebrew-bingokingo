cask "font-misans-khmer" do
  version "1.200"
  sha256 :no_check

  url "https://hyperos.mi.com/font-download/MiSans_Khmer.zip"
  name "MiSans Khmer VF"
  homepage "https://hyperos.mi.com/font/en/details/khmer/"

  # if sha256 == "ebd601b77f64f054ee1107f9fa0022f57284ae6e2c3342c924893b324cf96c60"
  #   font "MiSans Khmer/可变字体/MiSansKhmerVF.ttf"
  # elsif sha256 == "5369e44d4ea4696a8245504cda592320486eec276403857fff63985239420306"
  #   font "MiSans Khmer/MiSansKhmerVF.ttf"
  # end

  font "MiSansKhmer[wght].ttf"

  preflight do
    if Dir.exist?("#{staged_path}/MiSans Khmer/可变字体")
      FileUtils.mv("#{staged_path}/MiSans Khmer/可变字体/MiSansKhmerVF.ttf",
                   "#{staged_path}/MiSans Khmer/MiSansKhmerVF.ttf")
    end
    FileUtils.mv "#{staged_path}/MiSans Khmer/MiSansKhmerVF.ttf",
                 "#{staged_path}/MiSansKhmer[wght].ttf"
  end

  caveats do
    license "https://hyperos.mi.com/font-download/MiSans%E5%AD%97%E4%BD%93%E7%9F%A5%E8%AF%86%E4%BA%A7%E6%9D%83%E8%AE%B8%E5%8F%AF%E5%8D%8F%E8%AE%AE.pdf"
    <<~EOS
      You can preview font information generated by `otfinfo` at:
        #{__dir__}/#{token}.otfinfo
    EOS
  end
end
