cask "font-misans-latin" do
  version "4.007"
  sha256 :no_check

  url "https://hyperos.mi.com/font-download/MiSans_Latin.zip"
  name "MiSans Latin VF"
  homepage "https://hyperos.mi.com/font/en/details/latin/"

  # if sha256 == "d24091ccd409a4152ffcc12cd659c16df9cdcdb4c702d8ae355b321e711f0004"
  #   font "MiSans Latin/可变字体/MiSansLatinVF.ttf"
  # elsif sha256 == "501235d00ecd18b8e1f2fe972c96c4e30e0c073f3298d533094d3b653345a245"
  #   font "MiSans Latin/MiSans Latin VF.ttf"
  # end

  font "MiSansLatin[wght].ttf"

  preflight do
    if Dir.exist?("#{staged_path}/MiSans Latin/可变字体")
      FileUtils.mv("#{staged_path}/MiSans Latin/可变字体/MiSansLatinVF.ttf",
                   "#{staged_path}/MiSans Latin/MiSans Latin VF.ttf")
    end
    FileUtils.mv("#{staged_path}/MiSans Latin/MiSans Latin VF.ttf",
                 "#{staged_path}/MiSansLatin[wght].ttf")
  end

  caveats do
    license "https://hyperos.mi.com/font-download/MiSans%E5%AD%97%E4%BD%93%E7%9F%A5%E8%AF%86%E4%BA%A7%E6%9D%83%E8%AE%B8%E5%8F%AF%E5%8D%8F%E8%AE%AE.pdf"
    <<~EOS
      You can preview font information generated by `otfinfo` at:
        #{__dir__}/#{token}.otfinfo
    EOS
  end
end
