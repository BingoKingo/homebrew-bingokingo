cask "font-sf-armenian" do
  version "19.0d5e1,20.0d1e1"

  on_macos do
    depends_on formula: "fonttools"
    depends_on formula: "p7zip"

    url "https://devimages-cdn.apple.com/design/resources/download/SF-Armenian.dmg"
    sha256 "ffd715ae93d7c215be3f434b84624184779bb50b2bb3d66b8fd42880c65fadad"

    preflight do
      system_command "/bin/bash", args: [
        "-c", <<~SHELL
          mkdir -p '#{staged_path}/tmp/' \
          && '#{HOMEBREW_PREFIX}/opt/p7zip/bin/7z' -txar e \
          '#{staged_path}/SF Armenian Fonts.pkg' -y -o'#{staged_path}/tmp/' \
          && '#{HOMEBREW_PREFIX}/opt/p7zip/bin/7z' -tgzip e \
          '#{staged_path}/tmp/Payload' -y -o'#{staged_path}/tmp/' \
          && '#{HOMEBREW_PREFIX}/opt/p7zip/bin/7z' -tcpio e \
          '#{staged_path}/tmp/Payload~' './Library/Fonts/*' -o'#{staged_path}/Fonts' \
          && cp '#{staged_path}/tmp/License.rtf' '#{staged_path}/License.rtf' \
          && rm -r '#{staged_path}/tmp/' \
          && ls '#{staged_path}/Fonts/'* \
          | awk '{print "\\"" $0 "\\""}' \
          | xargs '#{HOMEBREW_PREFIX}/opt/fonttools/bin/fonttools' ttLib \
          -o '#{staged_path}/SF-Armenian.ttc'
        SHELL
      ]
    end
  end

  on_linux do
    sha256 "92a9243f2282f58beb736e3cab56068a5f1c95ba956e52fbaa96a1c43613126e"

    url "https://api.github.com/repos/BingoKingo/homebrew-private/releases/assets/280250024",
        verified: "github.com/",
        header:   ["Accept: application/octet-stream",
                   "Authorization: Bearer #{ENV.fetch("HOMEBREW_GITHUB_API_TOKEN", nil)}",
                   "X-GitHub-Api-Version: 2022-11-28"]
  end

  name "San Francisco Armenian"
  name "SF Armenian"
  homepage "https://developer.apple.com/fonts/"

  font "SF-Armenian.ttc"

  caveats do
    <<~EOS
      \033[1m[L]\033[0m Private files cannot be downloaded without permission.

      # Generated by `otfinfo`
      Family:                 SF Armenian             SF Armenian Rounded
      Subfamily:              Regular                 Regular
      Full name:              SF Armenian             SF Armenian Rounded
      PostScript name:        SFArmenian-Regular      SF
                                                      ArmenianRounded-Regular
      Preferred family:       SF Armenian             SF Armenian Rounded
      Version:                Version 20.0d1e1        Version 19.0d5e1
      Unique ID:              SF Armenian; 20.0d1e1;  SF Armenian Rounded;
                              2024-04-19              19.0d5e1; 2023-06-07
      Description:            Apple Inc.
      Designer:               Apple Inc.
      Designer URL:           http://www.apple.com/
      Manufacturer:           Apple Inc.
      Vendor URL:             http://www.apple.com/
      Copyright:              Copyright © 2023 Apple Inc. All rights reserved.
      License Description:    "This SF Armenian Font (the “Apple Font”) is licensed to you by Apple Inc. (“Apple”) in consideration of your agreement to the following terms and the terms of the License Agreement for the Apple SF Armenian Font that was presented upon the downloading of the Apple Font. If you do not agree with these terms and the terms of the License Agreement for the Apple SF Armenian Font, do not use the Apple Font."
      "You may use the Apple Font solely for creating mock-ups of user interfaces to be used in software products running on Apple’s iOS, iPadOS, macOS, tvOS or watchOS operating systems, as applicable. The foregoing right includes the right to show the Apple Font in screen shots, images, mock-ups or other depictions, digital and/or print, of such software products running solely on iOS, iPadOS, macOS, tvOS or watchOS."
      "The grants set forth in this License do not permit you to, and you agree not to, install, use or run the Apple Font for the purpose of creating mock-ups of user interfaces to be used in software products running on any non-Apple operating system or to enable others to do so. You may not embed the Apple Font in any software programs or other products. Except as expressly provided for herein, you may not use the Apple Font to, create, develop, display or otherwise distribute any documentation, artwork, website content or any other work product."
      "You may use the Apple Font: (i) only for the purposes described in this License and the License Agreement for the Apple SF Armenian Font; and (ii) only if you are a Registered Apple Developer, or as otherwise expressly permitted by Apple in writing."
      Vendor ID:              NONE
      Permissions:            Editable
      Axis 0:                 wght                    wght
      Axis 0 name:            Weight                  Weight
      Axis 0 range:           1 1000                  1 1000
      Axis 0 default:         400                     400
      Axis 1:                 opsz                    -
      Axis 1 name:            Optical Size            -
      Axis 1 range:           17 28                   -
      Axis 1 default:         28                      -
      Instance 0 name:        Ultralight              Ultralight
      Instance 0 position:    30.9250030518 28        30.9250030518
      Instance 1 name:        Thin                    Thin
      Instance 1 position:    110.725006104 28        110.725006104
      Instance 2 name:        Light                   Light
      Instance 2 position:    274.315002441 28        274.315002441
      Instance 3 name:        Regular                 Regular
      Instance 3 position:    400 28                  400
      Instance 4 name:        Medium                  Medium
      Instance 4 position:    510 28                  510
      Instance 5 name:        Semibold                Semibold
      Instance 5 position:    590 28                  590
      Instance 6 name:        Bold                    Bold
      Instance 6 position:    700 28                  700
      Instance 7 name:        Heavy                   Heavy
      Instance 7 position:    860 28                  860
      Instance 8 name:        Black                   Black
      Instance 8 position:    1000 28                 1000
    EOS
  end
end
